cpu "8085.tbl"
hof "int8"

org	9000H

GTHEX: EQU 030EH
OUTPUT: EQU 0389H
HXDSP: EQU 034FH
RDKBD: EQU 03BAH
CLEAR: EQU 02BEH

MVI A, 8BH
OUT 43H

FLOOR0:
	MVI B,01H
	MVI A, 00H
	OUT 40H	
	CALL DELAY
	IN 41H
	CPI 00H
	JZ FLOOR0
	JMP FLOOR1
FLOOR1:		
	MVI A, 01H
	OUT 40H
	CALL DELAY
	IN 41H
	ANI 01H
	CPI 01H
	JZ FLOOR1
	MOV A,B
	CPI 00H
	JZ FLOOR0
	IN 41H
	ANI 0FFH
	CPI 01H
	MVI B,00H
	JC FLOOR0
	JZ FLOOR1
	MVI B,01H
	JMP FLOOR2 
FLOOR2:		
	MVI A, 02H
	OUT 40H
	CALL DELAY
	IN 41H
	ANI 02H
	CPI 02H
	JZ FLOOR2
	MOV A,B
	CPI 00H
	JZ FLOOR1
	IN 41H
	ANI 0FEH
	CPI 02H
	MVI B,00H
	JC FLOOR1
	JZ FLOOR2
	MVI B,01H
	JMP FLOOR3
FLOOR3:
	MVI A, 04H
	OUT 40H
	CALL DELAY
	IN 41H
	ANI 04H
	CPI 04H
	JZ FLOOR3
	MOV A,B
	CPI 00H
	JZ FLOOR2
	IN 41H
	ANI 0FCH
	CPI 04H
	MVI B,00H
	JC FLOOR2
	JZ FLOOR3
	MVI B,01H
	JMP FLOOR4
FLOOR4:
	MVI A, 08H
	OUT 40H
	CALL DELAY
	IN 41H
	ANI 08H
	CPI 08H
	JZ FLOOR4
	MOV A,B
	CPI 00H
	JZ FLOOR3
	IN 41H
	ANI 0F8H
	CPI 08H
	MVI B,00H
	JC FLOOR3
	JZ FLOOR4
	MVI B,01H
	JMP FLOOR5
FLOOR5:
	MVI A, 10H
	OUT 40H
	CALL DELAY
	IN 41H
	ANI 10H
	CPI 10H
	JZ FLOOR5
	MOV A,B
	CPI 00H
	JZ FLOOR4
	IN 41H
	ANI 0F0H
	CPI 10H
	MVI B,00H
	JC FLOOR4
	JZ FLOOR5
	MVI B,01H
	JMP FLOOR6
FLOOR6:
	MVI A, 20H
	OUT 40H
	CALL DELAY
	IN 41H
	ANI 20H
	CPI 20H
	JZ FLOOR6
	MOV A,B
	CPI 00H
	JZ FLOOR5
	IN 41H
	ANI 0E0H
	CPI 20H
	MVI B,00H
	JC FLOOR5
	JZ FLOOR6
	MVI B,01H
	JMP FLOOR7
FLOOR7:
	MVI A, 40H
	OUT 40H
	CALL DELAY
	IN 41H
	ANI 40H
	CPI 40H
	JZ FLOOR7
	MOV A,B
	CPI 00H
	JZ FLOOR6
	IN 41H
	ANI 0C0H
	CPI 40H
	MVI B,00H
	JC FLOOR6
	JZ FLOOR7
	MVI B,01H
	MVI B,01H
	JMP FLOOR8
FLOOR8:	
	MVI B, 00H
	MVI A, 80H
	OUT 40H
	CALL DELAY
	IN 41H
	ANI 80H
	CPI 80H
	JZ FLOOR8
	IN 41H
	ANI 080H
	CPI 80H
	JC FLOOR7
	JZ FLOOR8
DELAY:
	MVI C,09H
OUTLOOP:
	LXI D,0AF00H
INLOOP:
	DCX D
	MOV A,D
	ORA E
	JNZ INLOOP
	DCR C
	JNZ OUTLOOP
	RET
